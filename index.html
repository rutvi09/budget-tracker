<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Welcome â€” Budget Tracker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="intro-wrap">
    <div class="intro-card card">
      <h1>Welcome ðŸ‘‹</h1>
      <p class="lead">Start your financial journey. Choose your preferred display currency and theme below â€” you can change them later anytime inside the app.</p>

      <div class="form-row">
        <label for="initial-currency">Choose display currency</label>
        <select id="initial-currency"></select>
      </div>

      <div class="form-row">
        <label>Choose theme</label>
        <div style="display:flex; gap:10px;">
          <button id="theme-light" class="btn small">Light ðŸŒž</button>
          <button id="theme-dark" class="btn small">Dark ðŸŒ™</button>
        </div>
      </div>

      <div style="height:12px;"></div>

      <div class="form-row">
        <button id="start-app" class="btn primary large">Start Budget Tracker</button>
      </div>

      <p class="muted small" style="margin-top:14px;">You can change the currency, theme, and other preferences from inside the app later.</p>
    </div>

    <footer class="footer muted">Advanced Budget Tracker â€” mobile friendly</footer>
  </div>

  <script>
    // Currency list (same as app)
    const CURRENCIES = {
      "USD":"$ - USD","INR":"â‚¹ - INR","EUR":"â‚¬ - EUR","GBP":"Â£ - GBP","JPY":"Â¥ - JPY",
      "AUD":"A$ - AUD","CAD":"C$ - CAD","CHF":"CHF - CHF","CNY":"Â¥ - CNY","HKD":"HK$ - HKD",
      "SGD":"S$ - SGD","KRW":"â‚© - KRW","AED":"Ø¯.Ø¥ - AED","ZAR":"R - ZAR","PHP":"â‚± - PHP",
      "MYR":"RM - MYR","THB":"à¸¿ - THB","IDR":"Rp - IDR","MXN":"$ - MXN","BRL":"R$ - BRL",
      "TRY":"â‚º - TRY","SEK":"kr - SEK","NOK":"kr - NOK","DKK":"kr - DKK","PLN":"zÅ‚ - PLN"
    };

    const initialCurrencySel = document.getElementById('initial-currency');
    Object.keys(CURRENCIES).forEach(code=>{
      const opt = document.createElement('option');
      opt.value = code;
      opt.textContent = CURRENCIES[code];
      initialCurrencySel.appendChild(opt);
    });

    // default choice: try to use saved display currency if exist
    const savedState = localStorage.getItem('bt_state_v2');
    if(savedState){
      try {
        const st = JSON.parse(savedState);
        if(st.displayCurrency) initialCurrencySel.value = st.displayCurrency;
        if(st.theme === 'dark') document.body.classList.add('dark');
      } catch(e){}
    }

    // theme buttons
    document.getElementById('theme-light').addEventListener('click', ()=>{
      localStorage.setItem('bt_initial_theme','light');
      document.body.classList.remove('dark');
    });
    document.getElementById('theme-dark').addEventListener('click', ()=>{
      localStorage.setItem('bt_initial_theme','dark');
      document.body.classList.add('dark');
    });

    // start button -> save initial choices then open tracker.html
    document.getElementById('start-app').addEventListener('click', ()=>{
      const currency = initialCurrencySel.value || 'USD';
      localStorage.setItem('bt_initial_displayCurrency', currency);
      // If user previously chose a theme, keep it; if not, ensure default 'light'
      const t = localStorage.getItem('bt_initial_theme') || 'light';
      localStorage.setItem('bt_initial_theme', t);
      // Navigate to tracker
      window.location.href = 'tracker.html';
    });
  </script>
</body>
</html>